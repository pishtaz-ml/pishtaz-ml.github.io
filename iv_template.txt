# Telegram Instant View Template for Pishtaz (Version 2.1)
# Reference: https://instantview.telegram.org/docs

# 1. Version and Scope
# This line defines the scope and triggers the 2.1 engine
?path: /.+/.+

# 2. Grab the essentials
# Title
title: //h1

# Body (The main container)
body: //article

# Author
# Your HTML: <span class="text-sm text-gray-500">به قلم: {{ author }}</span>
author: //span[contains(text(), "به قلم")]
# Clean up the "به قلم:" prefix from the author name
@replace("به قلم: ", ""): $author

# Date
# Matches your date format (e.g., 1404)
published_date: //span[contains(text(), "14")]

# Subtitle (if exists)
subtitle: //h2[contains(@class, "text-gray-600")]

# 3. Media Handling
# Set the cover image from the meta tag
cover: //meta[@property="og:image"]/@content

# Optional: If you want the cover image to also appear at the top of the article body
# @prepend(<img src=$cover>): $body

# 4. Cleanup
# Remove navigation, sticky sidebars, and footnotes panel (IV has its own)
@remove: //div[contains(@class, "sticky")]
@remove: //div[@id="live-notes"]
@remove: //div[contains(@class, "border-t")]
@remove: //nav
@remove: //footer
@remove: //svg
@remove: //button

# 5. Figure & Caption (IV 2.1 supports these naturally)
# We just need to ensure they are inside the body selection
# No transformation needed if they are already <figure> and <figcaption>

# 6. Channel link (Bonus)
channel: "@pishtaz_ml"
